{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\EMBEDED\\\\Final_Project\\\\semicolon_app\\\\screens\\\\home\\\\Home.js\";\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteralLoose([\"\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  {\\n    me {\\n      ...UserParts\\n    }\\n  }\\n  \", \"\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteralLoose([\"\\n   mutation clickedStory($storyId : String!) {\\n      clickedStory(storyId:$storyId)\\n    }\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  {\\n    feedStories {\\n      id\\n      avatar\\n      username\\n    }\\n  }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  {\\n    seeFeed {\\n      ...PostParts\\n    }\\n  }\\n  \", \"\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from \"react\";\nimport styled from \"styled-components/native\";\nimport { gql } from \"apollo-boost\";\nimport Loader from \"../../components/Loader\";\nimport { useQuery } from \"react-apollo-hooks\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { Thumbnail } from 'native-base';\nimport Post from \"../../components/Post\";\nimport { POST_FRAGMENT, USER_FRAGMENT } from \"../../Fragments\";\nimport { LinearGradient } from 'expo-linear-gradient';\nimport StoryDetail from \"../story/StoryDetail\";\nimport { withNavigation } from \"react-navigation\";\nexport var FEED_QUERY = gql(_templateObject(), POST_FRAGMENT);\nexport var STORY_QUERY = gql(_templateObject2());\nexport var SEEN_QUERY = gql(_templateObject3());\nexport var ME = gql(_templateObject4(), USER_FRAGMENT);\nvar Story = styled.TouchableOpacity(_templateObject5());\nexport default (function (_ref) {\n  var navigation = _ref.navigation;\n  var localStyles = styles();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      refreshing = _useState2[0],\n      setRefreshing = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      modalUp = _useState4[0],\n      setModalUp = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      nowId = _useState6[0],\n      setNowId = _useState6[1];\n\n  var _useQuery = useQuery(FEED_QUERY),\n      loading = _useQuery.loading,\n      data = _useQuery.data,\n      refetch = _useQuery.refetch;\n\n  var _useQuery2 = useQuery(STORY_QUERY),\n      sloading = _useQuery2.loading,\n      sdata = _useQuery2.data,\n      srefetch = _useQuery2.refetch;\n\n  var _useQuery3 = useQuery(ME),\n      mloading = _useQuery3.loading,\n      mdata = _useQuery3.data,\n      mrefetch = _useQuery3.refetch;\n\n  var refresh = function refresh() {\n    return _regeneratorRuntime.async(function refresh$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            setRefreshing(true);\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(refetch());\n\n          case 4:\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(srefetch());\n\n          case 6:\n            _context.next = 11;\n            break;\n\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0);\n\n          case 11:\n            _context.prev = 11;\n            setRefreshing(false);\n            return _context.finish(11);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 8, 11, 14]], Promise);\n  };\n\n  return React.createElement(ScrollView, {\n    refreshControl: React.createElement(RefreshControl, {\n      refreshing: refreshing,\n      onRefresh: refresh,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 5\n    }\n  }, mloading && sloading && loading ? React.createElement(Loader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 12\n    }\n  }) : React.createElement(React.Fragment, null, React.createElement(View, {\n    style: {\n      height: 100\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    style: {\n      flex: 3,\n      borderBottomWidth: 0.8,\n      backgroundColor: \"white\",\n      borderBottomColor: 'lightgray'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 15\n    }\n  }, React.createElement(ScrollView, {\n    showsHorizontalScrollIndicator: false,\n    contentContainerStyle: {\n      alignItems: 'center',\n      paddingStart: 5,\n      paddingEnd: 5\n    },\n    horizontal: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  }, mdata && mdata.me && mdata.me.stories ? React.createElement(Story, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 20\n    }\n  }, React.createElement(LinearGradient, {\n    start: [1, 0.5],\n    end: [0, 0],\n    colors: ['#e3179e', 'tomato', 'orange', 'yellow'],\n    style: localStyles.linearGradient,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 23\n    }\n  }, React.createElement(View, {\n    style: localStyles.button,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 25\n    }\n  }, React.createElement(Thumbnail, {\n    style: {\n      marginHorizontal: 'auto',\n      borderColor: 'white',\n      borderWidth: 2\n    },\n    source: {\n      uri: mdata.me.avatar\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 27\n    }\n  }))), React.createElement(Text, {\n    style: {\n      textAlign: 'center',\n      marginTop: 5\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 23\n    }\n  }, \"\\uB0B4 \\uC2A4\\uD1A0\\uB9AC\")) : React.createElement(Story, {\n    onPress: function onPress() {\n      return navigation.navigate(\"TakeStory\");\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 21\n    }\n  }, React.createElement(LinearGradient, {\n    start: [1, 0.5],\n    end: [0, 0],\n    colors: ['lightgray', 'lightgray'],\n    style: localStyles.linearGradient,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 23\n    }\n  }, React.createElement(View, {\n    style: localStyles.button,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 25\n    }\n  }, React.createElement(Thumbnail, {\n    style: {\n      opacity: 0.7,\n      marginHorizontal: 'auto',\n      borderColor: 'white',\n      borderWidth: 2\n    },\n    source: {\n      uri: \"https://previews.123rf.com/images/siamimages/siamimages1611/siamimages161100055/65441642-add-plus-sign-icon-illustration-design.jpg\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 27\n    }\n  }))), React.createElement(Text, {\n    style: {\n      color: 'gray',\n      textAlign: 'center',\n      marginTop: 5\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 23\n    }\n  }, \"\\uB0B4 \\uC2A4\\uD1A0\\uB9AC\")), sdata && sdata.feedStories && sdata.feedStories.map(function (followings) {\n    return React.createElement(Story, {\n      onPress: function onPress() {\n        setNowId(followings.id);\n        setModalUp(!modalUp);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 23\n      }\n    }, modalUp ? React.createElement(StoryDetail, {\n      id: nowId,\n      visibles: modalUp,\n      setModalUp: setModalUp,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 36\n      }\n    }) : null, React.createElement(LinearGradient, {\n      start: [1, 0.5],\n      end: [0, 0],\n      colors: ['#e3179e', 'tomato', 'orange', 'yellow'],\n      style: localStyles.linearGradient,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 25\n      }\n    }, React.createElement(View, {\n      style: localStyles.button,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 27\n      }\n    }, React.createElement(Thumbnail, {\n      style: {\n        marginHorizontal: 'auto',\n        borderColor: 'white',\n        borderWidth: 2\n      },\n      source: {\n        uri: followings.avatar\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 29\n      }\n    }))), React.createElement(Text, {\n      style: {\n        textAlign: 'center',\n        marginTop: 5\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 25\n      }\n    }, followings.username));\n  })))), data && data.seeFeed && data.seeFeed.map(function (post) {\n    return React.createElement(Post, _extends({\n      key: post.id\n    }, post, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 40\n      }\n    }));\n  })));\n});\n\nvar gradientMargin = function gradientMargin() {\n  var ratio = (1 - gradientRatio(62)) / 2;\n  return 62 * ratio;\n};\n\nvar gradientRatio = function gradientRatio() {\n  return 0.94;\n};\n\nvar styles = function styles() {\n  return StyleSheet.create({\n    container: {\n      position: 'relative',\n      zIndex: 0\n    },\n    linearGradient: {\n      borderRadius: 62 / 2,\n      width: 62,\n      height: 62,\n      marginHorizontal: 5\n    },\n    button: {\n      margin: gradientMargin(62),\n      backgroundColor: 'white',\n      justifyContent: 'center',\n      alignContent: 'center',\n      borderRadius: 62 / 2 * gradientRatio(62),\n      width: 62 * gradientRatio(62),\n      height: 62 * gradientRatio(62),\n      paddingHorizontal: 1\n    }\n  });\n};","map":{"version":3,"sources":["D:/EMBEDED/Final_Project/semicolon_app/screens/home/Home.js"],"names":["React","useState","styled","gql","Loader","useQuery","Thumbnail","Post","POST_FRAGMENT","USER_FRAGMENT","LinearGradient","StoryDetail","withNavigation","FEED_QUERY","STORY_QUERY","SEEN_QUERY","ME","Story","TouchableOpacity","navigation","localStyles","styles","refreshing","setRefreshing","modalUp","setModalUp","nowId","setNowId","loading","data","refetch","sloading","sdata","srefetch","mloading","mdata","mrefetch","refresh","console","log","height","flex","borderBottomWidth","backgroundColor","borderBottomColor","alignItems","paddingStart","paddingEnd","me","stories","linearGradient","button","marginHorizontal","borderColor","borderWidth","uri","avatar","textAlign","marginTop","navigate","opacity","color","feedStories","map","followings","id","username","seeFeed","post","gradientMargin","ratio","gradientRatio","StyleSheet","create","container","position","zIndex","borderRadius","width","margin","justifyContent","alignContent","paddingHorizontal"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport styled from \"styled-components/native\";\r\nimport { gql } from \"apollo-boost\";\r\nimport Loader from \"../../components/Loader\";\r\nimport { useQuery } from \"react-apollo-hooks\";\r\nimport { ScrollView, RefreshControl, View, Text, StyleSheet } from \"react-native\";\r\nimport { Thumbnail } from 'native-base';\r\nimport Post from \"../../components/Post\";\r\nimport { POST_FRAGMENT, USER_FRAGMENT } from \"../../Fragments\";\r\nimport { LinearGradient } from 'expo-linear-gradient';\r\nimport StoryDetail from \"../story/StoryDetail\";\r\nimport { withNavigation } from \"react-navigation\";\r\n\r\nexport const FEED_QUERY = gql`\r\n  {\r\n    seeFeed {\r\n      ...PostParts\r\n    }\r\n  }\r\n  ${POST_FRAGMENT}\r\n`;\r\n\r\nexport const STORY_QUERY = gql`\r\n  {\r\n    feedStories {\r\n      id\r\n      avatar\r\n      username\r\n    }\r\n  }\r\n`;\r\n\r\nexport const SEEN_QUERY = gql`\r\n   mutation clickedStory($storyId : String!) {\r\n      clickedStory(storyId:$storyId)\r\n    }\r\n`;\r\n\r\nexport const ME = gql`\r\n  {\r\n    me {\r\n      ...UserParts\r\n    }\r\n  }\r\n  ${USER_FRAGMENT}\r\n`;\r\n\r\n\r\n\r\nconst Story = styled.TouchableOpacity`\r\n`;\r\n\r\nexport default ({navigation}) => {\r\n  let localStyles = styles()\r\n\r\n  const [refreshing, setRefreshing] = useState(false);\r\n  const [modalUp, setModalUp] = useState(false);\r\n  const [nowId, setNowId] = useState(null);\r\n  const { loading, data, refetch } = useQuery(FEED_QUERY);\r\n  const { loading: sloading, data: sdata, refetch: srefetch } = useQuery(STORY_QUERY);\r\n  const { loading: mloading, data: mdata, refetch: mrefetch } = useQuery(ME);\r\n  // const [seenUserMutation] = useMutation(SEEN_QUERY, {\r\n  //   variables: {\r\n  //     storyId: id\r\n  //   }\r\n  // });\r\n\r\n  const refresh = async () => {\r\n    try {\r\n      setRefreshing(true);\r\n      await refetch();\r\n      await srefetch();\r\n    } catch (e) {\r\n      console.log(e);\r\n    } finally {\r\n      setRefreshing(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ScrollView\r\n      refreshControl={\r\n        <RefreshControl refreshing={refreshing} onRefresh={refresh} />\r\n      }\r\n    >\r\n      {\r\n        mloading && sloading && loading ?\r\n          (<Loader />)\r\n          :\r\n          (<>\r\n            <View style={{ height: 100 }}>\r\n\r\n              <View style={{ flex: 3, borderBottomWidth: 0.8, backgroundColor: \"white\", borderBottomColor: 'lightgray' }}>\r\n                <ScrollView\r\n                  showsHorizontalScrollIndicator={false}\r\n                  contentContainerStyle={{\r\n                    alignItems: 'center',\r\n                    paddingStart: 5,\r\n                    paddingEnd: 5\r\n                  }}\r\n                  horizontal={true} >\r\n\r\n                  {mdata &&\r\n                    mdata.me &&\r\n                    mdata.me.stories ?\r\n                   <Story>\r\n                      <LinearGradient start={[1, 0.5]}\r\n                        end={[0, 0]}\r\n                        colors={['#e3179e', 'tomato', 'orange', 'yellow']}\r\n                        style={localStyles.linearGradient}>\r\n                        <View style={localStyles.button}>\r\n                          <Thumbnail style={{ marginHorizontal: 'auto', borderColor: 'white', borderWidth: 2 }} source={{ uri: mdata.me.avatar }} />\r\n                        </View>\r\n                      </LinearGradient>\r\n                      <Text style={{ textAlign: 'center', marginTop: 5 }}>내 스토리</Text>\r\n                    </Story>\r\n                    :\r\n                    <Story onPress={() => navigation.navigate(\"TakeStory\")}>\r\n                      <LinearGradient start={[1, 0.5]}\r\n                        end={[0, 0]}\r\n                        colors={['lightgray', 'lightgray']}\r\n                        style={localStyles.linearGradient}>\r\n                        <View style={localStyles.button}>\r\n                          <Thumbnail style={{ opacity: 0.7, marginHorizontal: 'auto', borderColor: 'white', borderWidth: 2 }} source={{ uri: \"https://previews.123rf.com/images/siamimages/siamimages1611/siamimages161100055/65441642-add-plus-sign-icon-illustration-design.jpg\" }} />\r\n                        </View>\r\n                      </LinearGradient>\r\n                      <Text style={{ color: 'gray', textAlign: 'center', marginTop: 5 }}>내 스토리</Text>\r\n                    </Story>\r\n\r\n                  }\r\n\r\n                  {sdata &&\r\n                    sdata.feedStories &&\r\n                    sdata.feedStories.map(followings =>\r\n                      // followings.stories.map(\r\n                      //   story => story.id === mdata.me.clickedStories.id ?\r\n                      <Story onPress={() => {\r\n                        setNowId(followings.id)\r\n                        setModalUp(!modalUp)\r\n                      }}>\r\n                        {modalUp ? < StoryDetail id={nowId} visibles={modalUp} setModalUp={setModalUp} /> : null}\r\n                        <LinearGradient start={[1, 0.5]}\r\n                          end={[0, 0]}\r\n                          colors={['#e3179e', 'tomato', 'orange', 'yellow']}\r\n                          style={localStyles.linearGradient}>\r\n                          <View style={localStyles.button}>\r\n                            <Thumbnail style={{ marginHorizontal: 'auto', borderColor: 'white', borderWidth: 2 }} source={{ uri: followings.avatar }} />\r\n                          </View>\r\n                        </LinearGradient>\r\n                        <Text style={{ textAlign: 'center', marginTop: 5 }}>{followings.username}</Text>\r\n                      </Story>\r\n                      // :\r\n                      // <Story>\r\n                      //    <LinearGradient start={[1, 0.5]}\r\n                      //    end={[0, 0]}\r\n                      //     colors={['lightgray', 'lightgray']}\r\n                      //      style={localStyles.linearGradient}>\r\n                      //      <View style={localStyles.button}>\r\n                      //        <Thumbnail style={{ marginHorizontal: 'auto', borderColor: 'white', borderWidth: 2 }} source={{ uri: followings.avatar }} />\r\n                      //      </View>\r\n                      //    </LinearGradient>\r\n                      //    <Text style={{ color : 'gray', textAlign: 'center', marginTop: 5 }}>{followings.username}</Text>\r\n                      //  </Story> \r\n                      // )\r\n                    )\r\n\r\n                  }\r\n\r\n                </ScrollView>\r\n              </View>\r\n            </View>\r\n\r\n\r\n            { data &&\r\n              data.seeFeed &&\r\n\r\n              data.seeFeed.map(post => <Post key={post.id} {...post} />)}\r\n          </>\r\n          )\r\n      }\r\n\r\n    </ScrollView>\r\n  );\r\n};\r\n\r\nconst gradientMargin = () => {\r\n  const ratio = (1 - gradientRatio(62)) / 2\r\n  return 62 * ratio\r\n}\r\n\r\nconst gradientRatio = () => {\r\n  return 0.94\r\n}\r\n\r\nconst styles = () => StyleSheet.create({\r\n  container: {\r\n    position: 'relative',\r\n    zIndex: 0,\r\n  },\r\n  linearGradient: {\r\n    borderRadius: 62 / 2,\r\n    width: 62,\r\n    height: 62,\r\n    marginHorizontal: 5\r\n  },\r\n  button: {\r\n    margin: gradientMargin(62),\r\n    backgroundColor: 'white',\r\n    justifyContent: 'center',\r\n    alignContent: 'center',\r\n    borderRadius: (62 / 2) * gradientRatio(62),\r\n    width: 62 * gradientRatio(62),\r\n    height: 62 * gradientRatio(62),\r\n    paddingHorizontal: 1\r\n  },\r\n});"]},"metadata":{},"sourceType":"module"}